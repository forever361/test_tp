{% extends "base.html" %}

{% block title %}UI自动化 测试平台 - new test cases{% endblock %}

{% block js %}
    <script src="/static/bootstrap-table-1.21.3/dist/bootstrap-table.min.js"></script>
    <link href="/static/bootstrap-table-1.21.3/dist/bootstrap-table.min.css" rel="stylesheet"/>

    <script src="/static/tanos/bootbox.all.min.js"></script>
    <script src="/static/tanos/popper.js"></script>
    <script src="/static/tanos/toastr.min.js"></script>
    <link href="/static/tanos/toastr.min.css" rel="stylesheet"/>

    <!-- Bootstrap Font Icon CSS -->
    <!--<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">-->

    <!--<script src="/static/tanos/data_connect.js"></script>-->


{% endblock %}


{% block content %}
    {#
<div style="background-color: #eee; height:100%; width:100%; align-items: center; display:flex; ">#}
    <div style=" margin: 20px; margin-bottom: 100px " class="card">
        <div class="card-body" style="padding:10px;">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center">
                    <h4>Admin Config</h4>


                </div>


                <div class="card" style="margin-top: 20px; padding: 10px;">
                    <div class="row">
                        <div id="loginTypeForm" class="mt-3">
                            <div class="mb-3">
                                <label for="login_type" class="form-label">Choose Login Type:</label>
                                <select class="form-select" name="login_type" id="login_type" style="width: 30%">
                                    <option value="login">Login</option>
                                    <option value="login2">Login 2</option>
                                </select>
                            </div>
                            <!-- 使用按钮组件 -->
                            <button type="button" class="btn btn-primary" id="switch-login">Switch Login Type</button>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>




    <script>

        $(document).ready(function () {

            $(document).on('click', '#switch-login', function () {

                var new_login_type = $('#login_type').val();

                $.ajax({
                    url: '/admin/update_login_type',
                    type: 'POST',
                    data: JSON.stringify({"login_type": new_login_type}),
                    contentType: 'application/json',
                    success: function (response) {
                        // 处理成功响应
                        toastr.success('Login type updated successfully!');
                    },
                    error: function (xhr, status, error) {
                        // 处理错误响应
                        toastr.error('Failed to update login type');
                    }
                });
            });
        });

    </script>


    <script>
    $(document).ready(function () {
        // 发送 AJAX 请求获取最新的登录类型
        $.ajax({
            url: '/admin/get_login_type',
            type: 'GET',
            success: function (response) {
                // 更新下拉框选项
                var loginType = response.login_type;
                $('#login_type').val(loginType);
            },
            error: function (xhr, status, error) {
                // 处理错误响应
                console.error('Failed to fetch login type:', error);
            }
        });


    });
</script>


{% endblock %}